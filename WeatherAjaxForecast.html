<!DOCTYPE html>
<html lang="en">

<head>
    <title>Weather Forecast Chart</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.3.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
</head>

<body>
    <div class="row">
        <div class="col-6">
            <canvas id="examChart"></canvas>
        </div>
    </div>

    <button id="start">Start</button>

    <script>

        $("#start").on("click", function () {
            getWeather();
        });

        function getWeather() {

            $.ajax({
                type: "GET",
                url: "https://api.openweathermap.org/data/2.5/forecast?lat=48.8588897&lon=2.3200410217200766&units=metric&appid={API_KEY_GOES_HERE}",
                success: function (apiResponse) {
                    console.log(apiResponse);
                    $("#name").append($(`<p> ${apiResponse} </p>`));

                    let arrayOfDates = [];
                    let temperatures = [];
                    let datesAndTemperatures = [];

                    for (i = 0; i < apiResponse.list.length; i++) {
                        arrayOfDates.push(apiResponse.list[i].dt_txt);
                        temperatures.push(apiResponse.list[i].main.temp);
                        let dateAndTemperature = {
                            t: apiResponse.list[i].dt_txt,
                            y: apiResponse.list[i].main.temp
                        };

                        datesAndTemperatures.push(dateAndTemperature);
                    }

                    console.log(arrayOfDates);
                    console.log(temperatures);
                    console.log(datesAndTemperatures);

                    var ctx = document.getElementById("examChart").getContext("2d");

                    var myChart = new Chart(ctx, {
                        type: 'line',
                        options: {
                            scales: {
                                xAxes: [{
                                    type: 'time',
                                }]
                            }
                        },
                        data: {
                            labels: arrayOfDates,
                            datasets: [{
                                label: 'Paris',
                                data: datesAndTemperatures,
                                borderWidth: 1
                            }]
                        }
                    });
                }
            });
        }

    </script>

</body>

</html>